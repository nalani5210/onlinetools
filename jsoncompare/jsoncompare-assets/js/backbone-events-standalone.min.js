!function(){function t(){return{keys:Object.keys||function(t){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError("keys() called on a non-object");var e,n=[];for(e in t)t.hasOwnProperty(e)&&(n[n.length]=e);return n},uniqueId:function(t){var e=++s+"";return t?t+e:e},has:function(t,e){return r.call(t,e)},each:function(t,e,n){if(null!=t)if(o&&t.forEach===o)t.forEach(e,n);else if(t.length===+t.length)for(var r=0,i=t.length;i>r;r++)e.call(n,t[r],r,t);else for(var s in t)this.has(t,s)&&e.call(n,t[s],s,t)},once:function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}}}}var e,n=this,o=Array.prototype.forEach,r=Object.prototype.hasOwnProperty,i=Array.prototype.slice,s=0,h=t();e={on:function(t,e,n){if(!u(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var r=this._events[t]||(this._events[t]=[]);return r.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,n){if(!u(this,"once",t,[e,n])||!e)return this;var r=this,i=h.once(function(){r.off(t,i),e.apply(this,arguments)});return i._callback=e,this.on(t,i,n)},off:function(t,e,n){var r,i,s,o,c,l,f,a;if(!this._events||!u(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(o=t?[t]:h.keys(this._events),c=0,l=o.length;l>c;c++)if(t=o[c],s=this._events[t]){if(this._events[t]=r=[],e||n)for(f=0,a=s.length;a>f;f++)i=s[f],(e&&e!==i.callback&&e!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=i.call(arguments,1);if(!u(this,"trigger",t,e))return this;var n=this._events[t],r=this._events.all;return n&&c(n,e),r&&c(r,arguments),this},stopListening:function(t,e,n){var r=this._listeners;if(!r)return this;var i=!e&&!n;"object"==typeof e&&(n=this),t&&((r={})[t._listenerId]=t);for(var s in r)r[s].off(e,n,this),i&&delete this._listeners[s];return this}};var l=/\s+/,u=function(t,e,n,r){if(!n)return!0;if("object"==typeof n){for(var i in n)t[e].apply(t,[i,n[i]].concat(r));return!1}if(l.test(n)){for(var s=n.split(l),o=0,c=s.length;c>o;o++)t[e].apply(t,[s[o]].concat(r));return!1}return!0},c=function(t,e){var n,r=-1,i=t.length,s=e[0],o=e[1],c=e[2];switch(e.length){case 0:for(;++r<i;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=t[r]).callback.call(n.ctx,s);return;case 2:for(;++r<i;)(n=t[r]).callback.call(n.ctx,s,o);return;case 3:for(;++r<i;)(n=t[r]).callback.call(n.ctx,s,o,c);return;default:for(;++r<i;)(n=t[r]).callback.apply(n.ctx,e)}},f={listenTo:"on",listenToOnce:"once"};h.each(f,function(s,t){e[t]=function(t,e,n){var r=this._listeners||(this._listeners={}),i=t._listenerId||(t._listenerId=h.uniqueId("l"));return r[i]=t,"object"==typeof e&&(n=this),t[s](e,n,this),this}}),e.bind=e.on,e.unbind=e.off,e.mixin=function(e){var t=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return h.each(t,function(t){e[t]=this[t]},this),e},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),exports.BackboneEvents=e):"function"==typeof define&&"object"==typeof define.amd?define(function(){return e}):n.BackboneEvents=e}(this);